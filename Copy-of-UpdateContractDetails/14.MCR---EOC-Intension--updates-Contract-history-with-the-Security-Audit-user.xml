<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d6fc749b-e710-42be-ac66-94d7cc11caa3" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="14.MCR - EOC Intension  updates Contract history with the Security Audit user" searchProperties="true" timeout="0" maxResults="10000000" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="b3b11e1b-5818-4f0f-9eb0-7d167bdde74efileName">14.MCR---EOC-Intension--updates-Contract-history-with-the-Security-Audit-user</con:setting><con:setting id="d6fc749b-e710-42be-ac66-94d7cc11caa3fileName">14.MCR---EOC-Intension--updates-Contract-history-with-the-Security-Audit-user</con:setting></con:settings><con:testStep type="groovy" name="Set ExcelData Row" id="f504ca6c-523d-41d9-99c6-9ce53a642017"><con:settings/><con:config><script>testRunner.testCase.testSuite.setPropertyValue("TestStartCell", "A2")</script></con:config></con:testStep><con:testStep type="datasource" name="DataSource13" id="d12a6273-b178-4dd7-a2d6-afe6c6e8cd91"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.teststeps.datasource.DataSourceContainer@prepared-properties">&lt;xml-fragment/></con:setting></con:settings><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Data Connection"><con:configuration><Connection>DBCALMS2CMS( Default environment )</Connection><query>select lc.CLINK_SECONDARY as MCU , lc.CLINK_PRIMARY, ln.LNKNUM_EXTERNAl_REF_FIELD as loan_num
from LCLINK lc , lloan l,lasset a , ltablink t, LLNKNUM ln
where exists
  (select a.asset_loan_num
  from 
  lasset a
  where a.asset_loan_num = l.loan_num )
and lc.CLINK_PRIMARY_IS_MCREF ='Y'
and l.loan_status &lt;>2
and t.Tblnk_Type in ('3')
and l.loan_num = lc.CLINK_SECONDARY
and l.loan_type = t.TBLNK_SECONDARY
and lc.CLINK_PRIMARY= ln.LNKNUM_INTERNAL_REF_FIELD</query><fetchSize/><stored-procedure>false</stored-procedure></con:configuration></con:dataSource><con:shared>false</con:shared><con:restartShared>false</con:restartShared><con:property>loan_num</con:property><con:property>MCU</con:property><con:completeLastOperation>true</con:completeLastOperation><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="dataAssignment" id="c2b3eac1-341d-4379-8e79-16607f5503e4"><con:settings/><con:config><script>def loan_num = context.expand( '${DataSource13#loan_num}' )
def mCU = context.expand( '${DataSource13#MCU}' )

testRunner.testCase.testSuite.setPropertyValue("contract", loan_num)

testRunner.testCase.testSuite.setPropertyValue("MCU", mCU)</script></con:config></con:testStep><con:testStep type="calltestcase" name="updateContractDetails" id="805884b4-81b1-4958-9c3c-8c13d9dfebc3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8dc8df2a-4560-43c7-9a09-5c585f45dcee</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="datasource" name="DataSource" id="57c805eb-f195-4cf0-a5ab-5486e7f7e3ac"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.teststeps.datasource.DataSourceContainer@prepared-properties">&lt;xml-fragment/></con:setting></con:settings><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Data Connection"><con:configuration><Connection>DBCALMS2CMS( Default environment )</Connection><query>select count(*) as total
from LAUD 
where AUD_USER_ID = '${#TestSuite#audit}'
 and AUD_USER = '${#TestSuite#MCU}'
--and 
and AUD_AFTER_VALUE = 'LEXTN CUSTOMER INTENTION:1'
order by A4GLIDENTITY desc</query><fetchSize/><stored-procedure>false</stored-procedure></con:configuration></con:dataSource><con:shared>false</con:shared><con:restartShared>false</con:restartShared><con:property>total</con:property><con:completeLastOperation>true</con:completeLastOperation><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="521c517d-f770-41fb-a2b6-b62ee28cb362"><con:settings/><con:config><script>def total = context.expand( '${DataSource#total}' )

if (total == '1'){
	log.info "true"
	testRunner.testCase.testSuite.setPropertyValue("audit", "true")
}else{
		log.info "false"
	testRunner.testCase.testSuite.setPropertyValue("audit", "false")
}
</script></con:config></con:testStep><con:testStep type="assertionteststep" name="Assertion 2" id="bfadafe8-2022-476e-9206-850f318e5e26"><con:settings/><con:config xsi:type="con:AssertionTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:entry><con:id>b2204f67-81eb-4739-b8a2-05c6386643de</con:id><con:isGroup>false</con:isGroup><con:sourceId>41c1193a-9f13-4187-8af7-ee75e96c5268</con:sourceId><con:propertyName>audit</con:propertyName><con:assertion type="Simple Equals" name="Equals" id="ee59f8cb-7fae-4c73-9e47-78b5c67fbfc1"><con:configuration><patternText>true</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion></con:entry></con:config></con:testStep><con:testStep type="assertionteststep" name="Assertion" id="2d803655-9c50-47c0-8fd7-ac34628ca66e"><con:settings/><con:config xsi:type="con:AssertionTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:entry><con:id>df7219d6-a936-4ce1-8b99-a18bf48f4017</con:id><con:isGroup>false</con:isGroup><con:sourceId>41c1193a-9f13-4187-8af7-ee75e96c5268</con:sourceId><con:propertyName>TestResult</con:propertyName><con:assertion type="Simple Equals" name="Equals" id="eadebc6c-55f5-487c-969d-81e494c3a539"><con:configuration><patternText>PASS</patternText><caseSensitive>true</caseSensitive></con:configuration></con:assertion></con:entry></con:config></con:testStep><con:testStep type="groovy" name="Set ExcelData Row to A2" id="03a187e9-cd40-4166-a9d5-a3495e1575ff"><con:settings/><con:config><script>testRunner.testCase.testSuite.setPropertyValue("TestStartCell", "A14")</script></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>5dd0d074-2aeb-4107-a07d-3f7191f5dac9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f88c8df2-f4c3-48a0-8d67-f40058380f62</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>63918af2-7c53-40c5-9db5-d6f1ba2cc8a8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:environmentSpec><con:entry environmentId="e6adfe25-6984-4ee1-93c5-4d9c74b1fdf6"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="112f4a66-5a4b-434d-b2bd-545253fd642c"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="4143f28d-a750-4734-bce6-5c2a6d3d7f9c"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="b76764fd-8ea2-4d21-b7df-4cb5351d4f53"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="a6566457-9045-4b25-ac54-078c86d840ea"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="ae8e0480-fa17-44a7-bcc7-f4a450334b74"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="9f36af4a-1bb6-4e88-a92d-65ff3a0063c2"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="1b4cb691-92fd-43d3-8eb1-2fffb04f906d"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d36d30f7-59cd-4be8-8b69-bbe1d5a35292"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="d2d1977c-5412-4ad0-aead-f799c1228abb"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="31740623-c48a-4d64-ba9e-c19c0684b8f8"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="24ca39f1-63a3-4ac0-932a-b6649948b285"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:testCase>